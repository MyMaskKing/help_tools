# Dockerfile
# ------------------------------------------------------------
# ğŸ¯ å…³é”®ä¿®æ­£ï¼šä½¿ç”¨æ‚¨å·²æˆåŠŸæ‹‰å–çš„æ ‡ç­¾
FROM alpine:latest 

# é˜¶æ®µ 1ï¼šæ„å»ºç¯å¢ƒ
# å®‰è£… curl å’Œ grep å·¥å…·ã€‚è¿™äº›æ˜¯å¥åº·æ£€æŸ¥è„šæœ¬ï¼ˆcurl | grepï¼‰æ‰€å¿…éœ€çš„ã€‚
RUN apk update && apk add --no-cache curl grep

# é˜¶æ®µ 2ï¼šä»å®˜æ–¹ cloudflared é•œåƒä¸­å¤åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚
COPY --from=cloudflare/cloudflared:latest /usr/local/bin/cloudflared /usr/local/bin/cloudflared

# è®¾ç½®å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å…¥å£ç‚¹
ENTRYPOINT ["/usr/local/bin/cloudflared"]
# ------------------------------------------------------------